<?xml version="1.0" encoding="UTF-8"?>

<odoo noupdate="0">

  <!-- VIEWS: "Training action line"

      - Model·········: academy.training.action.line
      - _rec_name·····: training_module_id
      - Domain········: []
      - Context·······: {}
      - Parent menu ··: academy_base.menu_academy_catalog
      - View priority·: 16    Sequence····: 10
      - Action help···: There are no action lines yet
  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

  <!-- Tree view for "academy.training.action.line" -->
  <record id="view_academy_training_action_line_tree" model="ir.ui.view">
    <field name="name">view.academy.training.action.line.tree</field>
    <field name="model">academy.training.action.line</field>
    <field name="type">list</field>
    <field name="mode">primary</field>
    <field name="priority" eval="16"/>
    <field name="active" eval="True"/>
    <field name="inherit_id" ref="view_academy_training_program_line_tree" />
    <field name="arch" type="xml">
      <xpath expr="//list" position="attributes">
          <attribute name="string">academy_training_action_line_tree</attribute>
          <attribute name="decoration-it">not program_line_id</attribute>
      </xpath>
      <xpath expr="//field[@name='training_program_id']" position="replace">
        <field name="training_action_id" column_invisible="1" />
      </xpath>
      <xpath expr="//field[@name='training_module_id']" position="after">
          <field name="primary_teacher_id" class="oe_field_primary_teacher_id" />
      </xpath>
    </field>
  </record>

  <!-- Form view for "academy.training.action.line" -->
  <record id="view_academy_training_action_line_form" model="ir.ui.view">
    <field name="name">view.academy.training.action.line.form</field>
    <field name="model">academy.training.action.line</field>
    <field name="type">form</field>
    <field name="mode">primary</field>
    <field name="priority" eval="16"/>
    <field name="active" eval="True"/>
    <field name="inherit_id" ref="view_academy_training_program_line_form" />
    <field name="arch" type="xml">
      <xpath expr="//div[@name='button_box']" position="inside">
        <button name="view_teacher_assignments" type="object" class="oe_stat_button oe_read_only"
            icon="fa-users" help="View teacher assignments">
            <field name="teacher_assignment_count" widget="statinfo" string="Teachers" />
        </button>
      </xpath>
      <xpath expr="//form" position="attributes">
          <attribute name="string">academy_training_action_line_form</attribute>
      </xpath>
      <xpath expr="//field[@name='training_program_id']" position="replace">
        <field name="training_action_id" class="oe_field_training_program_id"/>
      </xpath>
      <xpath expr="//page[@id='setup']" position="after">
        <page string="Teaching" class="oe_page_teaching" accesskey="T">
          <field name="teacher_assignment_ids" class="oe_field_teacher_assignment_ids"
            options="{'no_quick_create': True, 'no_create': True, 'no_open': False}"
            context="{'default_training_action_id': training_action_id, 'default_action_line_id': id}" />
        </page>
      </xpath>
    </field>
  </record>

  <!-- Search view for "academy.training.action.line" -->
  <record id="view_academy_training_action_line_search" model="ir.ui.view">
    <field name="name">view.academy.training.action.line.search</field>
    <field name="model">academy.training.action.line</field>
    <field name="type">search</field>
    <field name="mode">primary</field>
    <field name="priority" eval="16"/>
    <field name="active" eval="True"/>
    <field name="inherit_id" ref="view_academy_training_program_line_search" />
    <field name="arch" type="xml">
      <xpath expr="//search" position="attributes">
          <attribute name="string">academy_training_action_line_search</attribute>
      </xpath>

      <xpath expr="//field[@name='training_program_id']" position="replace">
        <field name="training_action_id" />
      </xpath>

      <xpath expr="//filter[@name='group_by_training_program']" position="replace">
        <filter string="Group by training program" name="group_by_training_program" domain="[]"
          context="{'group_by': 'training_program_id'}" help=""/>
      </xpath>

    </field>
  </record>

  <!-- Main window action for model.name -->
  <record id="action_training_action_line_act_window" model="ir.actions.act_window">
    <field name="type">ir.actions.act_window</field>
    <field name="name">Training action line</field>
    <field name="res_model">academy.training.action.line</field>
    <field name="view_mode">list,form</field>
    <field name="target">current</field>
    <field name="domain">[]</field>
    <field name="context">{}</field>
    <field name="search_view_id" ref="view_academy_training_action_line_search"/>
    <field name="help" type="html">
      <p class="oe_view_nocontent_create"> Click to add new training action line </p>
      <p> There are no training action lines yet </p>
    </field>
  </record>

  <!-- Tree view for "academy.training.action.line" -->
  <record id="view_academy_training_action_line_tree_action_embed" model="ir.ui.view">
    <field name="name">view.academy.training.action.line.tree</field>
    <field name="model">academy.training.action.line</field>
    <field name="type">list</field>
    <field name="mode">primary</field>
    <field name="priority" eval="99"/>
    <field name="active" eval="True"/>
    <field name="inherit_id" />
    <field name="arch" type="xml">
      <list string="academy_training_action_line_tree_action_embed" class="academy-training-program-line-tree"
        create="1" delete="1" edit="1" decoration-bf="is_section" decoration-it="not program_line_id" decoration-muted="is_section" >

        <field name="active" column_invisible="1"/>
        <field name="training_program_id" column_invisible="1" />
        <field name="program_line_id" column_invisible="1" />
        <field name="is_section" column_invisible="True"/>

        <field name="sequence" class="oe_field_sequence" widget="handle" />
        <field name="code" class="oe_field_code" invisible="is_section" optional="show" />
        <field name="name" class="oe_field_name academy-section-title" />
        <field name="hours" class="oe_field_hours" widget="float_time" required="not is_section" invisible="is_section"/>
        <field name="primary_teacher_id" class="oe_field_primary_teacher_id" />

        <control>
          <create string="Add line"/>
          <create string="Add section" context="{'default_is_section': True}"/>
        </control>

      </list>
    </field>
  </record>

</odoo>
