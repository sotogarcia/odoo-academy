<?xml version="1.0" encoding="UTF-8"?>

<odoo noupdate="0">

  <!-- VIEWS: "Ssupport"

            - Model·········: academy.support.staff
            - _rec_name·····: name
            - Domain········: []
            - Context·······: {}
            - Parent menu ··: academy_base.menu_academy_monitoring
            - View priority·: 16    Sequence····: 10
            - Action help···: Here are not support staff member
        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

  <!-- List view for "academy.support.staff" -->
  <record id="view_academy_support_staff_tree" model="ir.ui.view">
    <field name="name">view.academy.support.staff.tree</field>
    <field name="model">academy.support.staff</field>
    <field name="type">list</field>
    <field name="mode">primary</field>
    <field name="priority" eval="16"/>
    <field name="active" eval="True"/>
    <field name="arch" type="xml">
      <list string="academy_support_staff_tree" create="1" delete="1" edit="1">
        <field name="vat" class="oe_field_vat" optional="show"/>
        <field name="title" class="oe_field_title" optional="hide"/>
        <field name="name" class="oe_field_name" optional="show"/>
        <field name="lastname" class="oe_field_lastname" optional="hide"/>
        <field name="firstname" class="oe_field_firstname" optional="hide"/>
        <field name="email" class="oe_field_email" optional="show"/>
        <field name="call_number" class="oe_field_call_number" optional="show"/>
        <field name="phone" class="oe_field_phone" optional="hide"/>
        <field name="mobile" class="oe_field_mobile" optional="hide"/>
        <field name="zip" class="oe_field_zip" optional="show"/>
        <field name="city" class="oe_field_city" optional="show"/>
        <field name="state_id" class="oe_field_state_id" optional="show"/>
        <field name="country_id" class="oe_field_country_id" optional="hide"/>
      </list>
    </field>
  </record>

  <!-- Form view for "academy.support.staff" -->
  <record id="view_academy_support_staff_form" model="ir.ui.view">
    <field name="name">view.academy.support.staff.form</field>
    <field name="model">academy.support.staff</field>
    <field name="type">form</field>
    <field name="mode">primary</field>
    <field name="priority" eval="16"/>
    <field name="active" eval="True"/>
    <field name="inherit_id"/>
    <field name="arch" type="xml">
      <form string="Support staff" create="1" delete="1" edit="1">
        <sheet>
          <field name="id" invisible="1"/>
          <field name="company_type" invisible="1"/>
          <field name="is_company" invisible="1"/>
          <field name="type" invisible="1"/>
          <field name="form_has_lastname_first" invisible="1"/>
          <field name="implied_cefrl_ids" invisible="1"/>
          <field name="vat_required" invisible="1"/>
          <field name="email_required" invisible="1"/>

          <div class="oe_button_box" name="button_box">
            <button name="view_res_partner" type="object" class="oe_stat_button oe_read_only"
              icon="fa-user-o" help="Open contact form">
              <field name="type" widget="statinfo" string="Partner"/>
            </button>
          </div>

          <widget name="web_ribbon" title="Archived" bg_color="text-bg-danger"
            invisible="(not id) or (not partner_id) or active"/>
          <field name="image_1920" widget="image" class="oe_avatar"
            options='{"preview_image": "avatar_128"}'/>

          <div class="oe_title">
            <field name="creation_mode" widget="radio" options="{'horizontal': true}" invisible="id"/>
            <div class="mt-3 mb-4">
              <field name="partner_id" class="oe_field_partner_id"
                invisible="(creation_mode == 'from_scratch') or id"/>
              <group col="2">
                <field
                  invisible="((creation_mode == 'from_existing') and (not id)) or not form_has_lastname_first"
                  name="lastname" required="form_has_lastname_first and not firstname"/>
                <field invisible="((creation_mode == 'from_existing') and (not id))"
                  name="firstname" required="not lastname"/>
                <field
                  invisible="((creation_mode == 'from_existing') and (not id)) or form_has_lastname_first"
                  name="lastname" required="not form_has_lastname_first and not firstname"/>
              </group>
            </div>
          </div>

          <group class="mt-5">
            <group>
              <field name="vat" placeholder="e.g. BE0477472701" readonly="parent_id"
                required="vat_required"/>
              <field name="birthday" class="oe_field_birthday"/>

              <span class="o_form_label o_td_label o_address_type" name="address_name">
                <span>Address</span>
              </span>
              <div class="o_address_format mt-4">
                <field name="street" placeholder="Street..." class="o_address_street"
                  readonly="type == 'contact' and parent_id"/>
                <field name="street2" placeholder="Street 2..." class="o_address_street"
                  readonly="type == 'contact' and parent_id"/>
                <field name="city" placeholder="City" class="o_address_city"
                  readonly="type == 'contact' and parent_id"/>
                <field name="state_id" class="o_address_state" placeholder="State"
                  options="{'no_open': True, 'no_quick_create': True}"
                  readonly="type == 'contact' and parent_id"
                  context="{'country_id': country_id, 'default_country_id': country_id, 'zip': zip}"/>
                <field name="zip" placeholder="ZIP" class="o_address_zip"
                  readonly="type == 'contact' and parent_id"/>
                <div name="partner_address_country" class="d-flex justify-content-between">
                  <field name="country_id" placeholder="Country" class="o_address_country"
                    options='{"no_open": True, "no_create": True}'
                    readonly="type == 'contact' and parent_id"/>
                </div>
              </div>
            </group>
            <group>
              <field name="function" placeholder="e.g. Sales Director"/>
              <field name="phone" widget="phone"/>
              <field name="mobile" widget="phone"/>
              <field name="email" widget="email" context="{'gravatar_image': True}"
                required="user_ids or email_required"/>
              <field name="website" string="Website" widget="url"
                placeholder="e.g. https://www.odoo.com"/>
              <field name="title" options='{"no_open": True}' placeholder="e.g. Mister"/>
              <field name="lang" invisible="active_lang_count &lt;= 1"/>
              <field name="category_id" widget="many2many_tags" options="{'color_field': 'color'}"
                placeholder='e.g. "B2B", "VIP", "Consulting", ...'/>
            </group>
          </group>

          <notebook colspan="4" class="mt-4">
            <page id="page-details" string="Details" class="oe_page_Academics" accesskey="D">
              <group col="12" class="mt-2" id="page-details-main">
                <group colspan="6">
                  <field name="attainment_id" class="oe_field_attainment_id" string="Attainment"
                    options="{'no_quick_create': True, 'no_create': True, 'no_open': True}"/>
                </group>
                <group colspan="6" id="page-details-extra">
                  <field name="cefrl_ids" class="oe_field_cefrl_ids"
                    options="{'no_quick_create': True, 'no_create': True, 'no_open': True}"
                    widget="many2many_tags" context="{'m2m_tags_display_name': 'code'}"/>
                </group>
              </group>
            </page>
            <page string="Contacts &amp; Addresses" name="contact_addresses">
              <field name="child_ids" mode="kanban" context="{
                  'default_parent_id': partner_id, 'default_user_id': user_id,
                  'default_street': street, 'default_street2': street2,
                  'default_city': city, 'default_state_id': state_id,
                  'default_zip': zip, 'default_country_id': country_id,
                  'default_lang': lang, 'default_type': 'other',
                  'form_view_ref': 'academy_base.view_res_partner_kanban_address_form_embed',
                  'kanban_view_ref': 'academy_base.view_res_partner_kanban_address_kanban_embed'
                }"> </field>
            </page>
            <page name="sales_purchases" string="Sales &amp; Purchase">
              <group name="container_row_2">
                <group string="Sales" name="sale" priority="1">
                  <field name="user_id" widget="many2one_avatar_user"
                    domain="[('share', '=', False)]"/>
                </group>
                <group string="Purchase" name="purchase" priority="2"> </group>
                <group name="misc" string="Misc">
                  <field name="company_registry" invisible="parent_id"/>
                  <field name="ref"/>
                  <field name="company_id" groups="base.group_multi_company"
                    options="{'no_create': True}" readonly="parent_id" force_save="1"/>
                  <field name="company_id" invisible="1"/>
                  <!-- need to be able to to compute based on the company even without multi company groups -->
                  <field name="industry_id" invisible="not is_company" options="{'no_create': True}"
                  />
                </group>
              </group>
            </page>
            <page name="internal_notes" string="Internal Notes">
              <field name="comment" placeholder="Internal notes..."/>
            </page>
          </notebook>
        </sheet>

        <chatter/>
      </form>
    </field>
  </record>

  <record id="view_academy_support_staff_kanban" model="ir.ui.view">
    <field name="name">view.academy.support.staff.kanban</field>
    <field name="model">academy.support.staff</field>
    <field name="type">kanban</field>
    <field name="mode">primary</field>
    <field name="priority" eval="16"/>
    <field name="active" eval="True"/>
    <field name="arch" type="xml">
      <kanban sample="1">
        <field name="avatar_128" />
        <field name="is_company" />
        <field name="parent_id" />
        <field name="active" />
        <field name="mobile" />
        <field name="phone" />
        <field name="email" />
        <field name="vat" />
        <field name="call_number" />
        <field name="avatar_128" />
        <field name="has_custom_avatar" />

        <templates>
          <t t-name="card" class="flex-row">
            <widget name="web_ribbon" title="Archived" bg_color="text-bg-danger" invisible="active"/>

            <aside class="o_kanban_aside_full">
              <t t-if="record.avatar_128.raw_value and record.has_custom_avatar.raw_value">
                <t t-if="!record.is_company.raw_value">
                  <div class="o_kanban_image_fill position-relative w-100">
                    <field name="avatar_128" alt="Contact image" class="h-100" widget="image"
                      options="{'img_class': 'object-fit-cover'}"/>
                    <field t-if="record.parent_id.raw_value" name="parent_id"
                      class="position-absolute bottom-0 end-0 w-25 bg-light" widget="image"
                      options="{'preview_image': 'image_128', 'img_class': 'object-fit-contain'}"/>
                  </div>
                </t>
                <t t-else="">
                  <field name="avatar_128" class="w-100" widget="image"
                    options="{'img_class': 'object-fit-contain w-100 h-100'}"/>
                </t>
              </t>
              <t t-else="">
                <img id="default-avatar" src="/academy_base/static/src/img/support-staff-128.png" class="w-100 h-auto p-2"
                  alt="Student" title="Student without image" />
              </t>
            </aside>

            <div class="flex-fill d-flex flex-column justify-content-between overflow-hidden w-100 ps-2 ps-md-0">
              <main class="d-flex flex-column justify-content-start align-items-start">
                <h2 class="h4">
                    <field name="display_name"/>
                </h2>

                <ul class="list-unstyled w-100 small my-0">
                  <li class="d-flex flex-row justify-content-start lh-lg text-truncate">
                    <t t-if="record.phone.raw_value or record.mobile.raw_value">
                      <t t-if="record.mobile.raw_value">
                        <t t-esc="record.mobile.raw_value" />
                      </t>
                      <t t-if="record.phone.raw_value and record.mobile.raw_value">
                        <span class="px-2">/</span>
                      </t>
                      <t t-if="record.phone.raw_value">
                        <t t-esc="record.phone.raw_value" />
                      </t>
                    </t>
                    <t t-else="">No phone</t>
                  </li>

                  <li class="d-flex flex-row justify-content-start lh-lg text-truncate" t-att-title="record.email.raw_value">
                    <t t-if="record.email.raw_value">
                      <t t-esc="record.email.raw_value" />
                    </t>
                    <t t-else="">No email</t>
                  </li>

                </ul>
              </main>

              <!-- footer: begin -->
              <footer class="d-flex justify-content-end align-items-start mt-2">
                <field name="activity_ids" widget="kanban_activity" class="my-0 py-0"/>
              </footer>
              <!-- footer: end -->

            </div>
          </t>
        </templates>

      </kanban>
    </field>
  </record>

  <!-- Search view for "academy.support.staff" -->
  <record id="view_academy_support_staff_search" model="ir.ui.view">
    <field name="name">view.academy.support.staff.search</field>
    <field name="model">academy.support.staff</field>
    <field name="type">search</field>
    <field name="mode">primary</field>
    <field name="priority" eval="16"/>
    <field name="active" eval="True"/>
    <field name="inherit_id"/>
    <field name="arch" type="xml">
      <search string="academy_support_staff_search">
        <field name="name"
          filter_domain="['|', '|', ('name', 'ilike', self), ('email', 'ilike', self), ('vat', 'ilike', self)]"/>
        <field name="phone"
          filter_domain="['|', ('phone', 'ilike', self), ('mobile', 'ilike', self)]"/>
        <field name="email"/>

        <field name="city"/>
        <field name="state_id"/>
        <field name="country_id"/>

        <field name="vat"/>
        <field name="category_id"/>

        <field name="id" string="Staff member ID"/>

        <filter name="inactive" string="Archived" domain="[('active', '=', False)]"/>

        <separator/>
        <group expand="0" name="group_by" string="Group By">
          <filter name="salesperson" string="Salesperson" domain="[]"
            context="{'group_by' : 'user_id'}"/>
          <filter name="group_company" string="Company" context="{'group_by': 'parent_id'}"/>
          <filter name="group_country" string="Country" context="{'group_by': 'country_id'}"/>
        </group>
      </search>
    </field>
  </record>

  <!-- Main window action for model.name -->
  <record id="action_support_staff_act_window" model="ir.actions.act_window">
    <field name="type">ir.actions.act_window</field>
    <field name="name">Support staff</field>
    <field name="res_model">academy.support.staff</field>
    <field name="view_mode">kanban,list,form,activity</field>
    <field name="path">academy-support-staff</field>
    <field name="target">current</field>
    <field name="domain">[]</field>
    <field name="context">{}</field>
    <field name="search_view_id" ref="view_academy_support_staff_search"/>
    <field name="help" type="html">
      <p class="oe_view_nocontent_create">Click to add new support staff members</p>
      <p> There are no support staff members</p>
    </field>
  </record>

  <!-- Main menu for model.name -->
  <record id="menu_support_staff" model="ir.ui.menu">
    <field name="name">Support staff</field>
    <field name="sequence" eval="20"/>
    <field name="action" ref="action_support_staff_act_window"/>
    <field name="parent_id" ref="academy_base.menu_academy_community"/>
    <field name="groups_id" eval="[(4, ref('academy_base.academy_group_technical'))]"/>
  </record>

</odoo>
