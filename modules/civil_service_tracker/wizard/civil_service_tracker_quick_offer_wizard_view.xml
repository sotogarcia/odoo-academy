<?xml version="1.0" encoding="UTF-8"?>

<openerp>
    <data noupdate="0">

        <record id="view_civil_service_tracker_quick_offer_wizard_wizard" model="ir.ui.view">
            <field name="name">Quick offer</field>
            <field name="model">civil.service.tracker.quick.offer.wizard</field>
            <field name="type">form</field>
            <field name="mode">primary</field>
            <field name="priority" eval="16" />
            <field name="active" eval="True" />
            <field name="arch" type="xml">
                <form string="Quick offer wizard" create="1" delete="1" edit="1" class="quick_offer_wizard">

                    <header>
                        <field name="state" widget="statusbar" clickable="1" />

                        <button name="perform_action"
                                class="btn btn-primary"
                                string="Create"
                                type="object"
                                default_focus="0"
                                icon="fa-play"
                                help="Create new public offer"
                                states="step3" />
                    </header>
        
                    <group col="6" states="step1" string="Offer">
                        <field name="public_offer_id" class="oe_field_public_offer_id" colspan="4"
                            options="{'no_quick_create': True, 'no_create': True, 'no_open': False}" />
                        <field name="public_offer_count" class="oe_field_public_offer_count" />

                        <separator colspan="6" />

                        <field name="public_administration_id" class="oe_field_public_administration_id" colspan="4"
                            options="{'no_quick_create': True, 'no_create': True, 'no_open': False}" 
                            attrs="{'readonly': [('public_offer_id', '&lt;&gt;', False)]}" />
                        <field name="offer_year" class="oe_field_offer_year"
                            attrs="{'readonly': [('public_offer_id', '&lt;&gt;', False)]}" />

                        <field name="issuing_authority_id" class="oe_field_issuing_authority_id" colspan="4"
                            options="{'no_quick_create': True, 'no_create': True, 'no_open': False}" 
                            attrs="{'readonly': [('public_offer_id', '&lt;&gt;', False)]}" />
                        <field name="offer_date" class="oe_field_offer_date" 
                            attrs="{'readonly': [('public_offer_id', '&lt;&gt;', False)]}" />

                        <separator colspan="6" />

                        <field name="bulletin_board_url" class="oe_field_bulletin_board_url" colspan="6"
                            attrs="{'readonly': [('public_offer_id', '&lt;&gt;', False)]}" widget="url_truncated" />
                        <field name="official_journal_url" class="oe_field_official_journal_url" colspan="6"
                            attrs="{'readonly': [('public_offer_id', '&lt;&gt;', False)]}" widget="url_truncated" />
                    </group>

                    <group col="2" states="step1" string="Options">
                        <group col="2" class="my-0">
                            <field name="contract_type_ids" class="oe_field_contract_type_ids" 
                                widget="many2many_checkboxes" />
                            <separator colspan="2" />
                            <field name="vacancy_type_ids" class="oe_field_vacancy_type_ids" 
                                widget="many2many_checkboxes" />
                        </group>
                        <group col="2" class="my-0">
                            <field name="access_type_ids" class="oe_field_access_type_ids" 
                                widget="many2many_checkboxes" />
                            <separator colspan="2" />
                            <field name="selection_method_ids" class="oe_field_selection_method_ids" 
                                widget="many2many_checkboxes" />
                        </group>
                    </group>

                    <group col="2" states="step2" class="w-100" string="Service position">
                        <field name="service_position_ids" class="oe_field_service_position_ids w-100" 
                            colspan="2" nolabel="1" options="{'no_quick_create': True, 'no_create': True, 'no_open': True}"
                            context="{'tree_view_ref': 'civil_service_tracker.view_civil_service_tracker_service_position_tree_on_group'}" />
                    </group>


                    <group col="2" states="step3" class="w-100">
                        <field name="wizard_line_ids" class="oe_field_wizard_line_ids w-100"
                            colspan="2" nolabel="1" force_save="1" />
                    </group>
        
                    <footer />
        
                </form>
            </field>
        </record>
        
        <record id="action_civil_service_tracker_quick_offer_wizard_wizard_act_window" model="ir.actions.act_window">
            <field name="type">ir.actions.act_window</field>
            <field name="name">Quick offer</field>
            <field name="res_model">civil.service.tracker.quick.offer.wizard</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
            <field name="domain">[]</field>
            <field name="context">{}</field>
        </record>
        
        <!-- Main menu for model.name -->
        <record id="menu_civil_service_tracker_quick_offer_wizard_wizard" model="ir.ui.menu" >
            <field name="name">Quick offer</field>
            <field name="sequence" eval="20" />
            <field name="action" ref="action_civil_service_tracker_quick_offer_wizard_wizard_act_window" />
            <field name="parent_id" ref="civil_service_tracker.menu_civil_service_tracker_tools" />
            <field name="groups_id" eval="[(4, ref('civil_service_tracker.group_civil_service_tracker_technician'))]"/>
        </record>
        

    </data>
</openerp>
